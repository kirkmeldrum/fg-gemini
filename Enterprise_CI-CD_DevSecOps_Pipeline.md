# Enterprise CI/CD & DevSecOps Pipeline
**Classification:** Enterprise Standard
**Phase:** 5 (Validate) & 6 (Deploy)

## 1. Overview
The Agentic SDLC v2.0 removes humans from manual deployments. The AI Operators write code and tests; the CI/CD pipeline acts as the ultimate enforcer of Gate 5 (Quality) and Gate 6 (Deployment).

## 2. Pipeline Architecture
All repositories must implement a standard 5-stage pipeline (using GitHub Actions, GitLab CI, or Azure DevOps):

1.  **Lint & Format:** Ensures AI-generated code meets human readability standards.
2.  **SAST & Dependencies:** Scans for hardcoded secrets, SQL injection vectors, and outdated NPM/Composer/Nuget packages.
3.  **Automated Testing:** Runs the test suites generated by `SKILL_test-suite-generator`.
4.  **Infrastructure as Code (IaC):** Provisions cloud resources (Terraform/Bicep).
5.  **Deployment:** Pushes artifacts to production/staging.

## 3. The Baseline YAML (GitHub Actions Example for Stack A/B)
*File: `.github/workflows/production-deploy.yml`*

```yaml
name: Enterprise SDLC Pipeline

on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]

jobs:
  security_and_lint:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Secret Scanning (Trivy)
        uses: aquasecurity/trivy-action@master
        with:
          scan-type: 'fs'
          security-checks: 'vuln,secret,config'
      
  automated_testing:
    needs: security_and_lint
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Setup Node
        uses: actions/setup-node@v4
      - name: Install & Test
        run: |
          npm ci
          npm run test:unit
          npm run test:e2e

  deploy_to_production:
    needs: automated_testing
    if: github.ref == 'refs/heads/main'
    runs-on: ubuntu-latest
    environment: production
    steps:
      - name: Deploy API and Web
        run: echo "Deploying artifact via IaC / PM2"